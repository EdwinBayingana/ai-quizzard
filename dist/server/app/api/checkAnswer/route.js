"use strict";(()=>{var e={};e.id=3648,e.ids=[3648],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61505:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>f,requestAsyncStorage:()=>l,routeModule:()=>w,serverHooks:()=>g,staticGenerationAsyncStorage:()=>_,staticGenerationBailout:()=>q});var n={};r.r(n),r.d(n,{POST:()=>POST}),r(95655);var s=r(83323),a=r(54647),i=r(11805),o=r(98740),u=r(66886),d=r(45952),c=r(80478),p=r.n(c);async function POST(e,t){try{let t=await e.json(),{questionId:r,userInput:n}=o.in.parse(t),s=await i._.question.findUnique({where:{id:r}});if(!s)return u.Z.json({message:"Question not found"},{status:404});if(await i._.question.update({where:{id:r},data:{userAnswer:n}}),"mcq"===s.questionType){let e=s.answer.toLowerCase().trim()===n.toLowerCase().trim();return await i._.question.update({where:{id:r},data:{isCorrect:e}}),u.Z.json({isCorrect:e})}if("open_ended"===s.questionType){let e=p().compareTwoStrings(s.answer.toLowerCase().trim(),n.toLowerCase().trim());return e=Math.round(100*e),await i._.question.update({where:{id:r},data:{percentageCorrect:e}}),u.Z.json({percentageSimilar:e})}}catch(e){if(e instanceof d.jm)return u.Z.json({message:e.issues},{status:400})}}let m=s.AppRouteRouteModule,w=new m({definition:{kind:a.x.APP_ROUTE,page:"/api/checkAnswer/route",pathname:"/api/checkAnswer",filename:"route",bundlePath:"app/api/checkAnswer/route"},resolvedPagePath:"/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/api/checkAnswer/route.tsx",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:_,serverHooks:g,headerHooks:h,staticGenerationBailout:q}=w,f="/api/checkAnswer/route"},11805:(e,t,r)=>{let n;r.d(t,{_:()=>n}),n=new(r(53524)).PrismaClient},98740:(e,t,r)=>{r.d(t,{dq:()=>s,in:()=>a});var n=r(45952);let s=n.z.object({topic:n.z.string(),amount:n.z.number().int().positive().min(1).max(10),type:n.z.enum(["mcq","open_ended"])}),a=n.z.object({userInput:n.z.string(),questionId:n.z.string()});n.z.object({gameId:n.z.string()})}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[7395,9506,9727,4467,6325],()=>__webpack_exec__(61505));module.exports=r})();
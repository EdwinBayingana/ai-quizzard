(()=>{var e={};e.id=3931,e.ids=[3931],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},28586:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>u,routeModule:()=>x,tree:()=>d});var r=s(73137),a=s(54647),i=s(4183),n=s.n(i),l=s(71775),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=r.AppPageRouteModule,d=["",{children:["play",{children:["mcq",{children:["[gameId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,73685)),"/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/play/mcq/[gameId]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,37226)),"/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/play/mcq/[gameId]/page.tsx"],m="/play/mcq/[gameId]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new o({definition:{kind:a.x.APP_PAGE,page:"/play/mcq/[gameId]/page",pathname:"/play/mcq/[gameId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70970:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,42796,23)),Promise.resolve().then(s.bind(s,23330))},23330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>components_MCQ});var r=s(60080),a=s(9885),i=s.n(a),n=s(46601),l=s(69957),c=s(2169),o=s(11440),d=s.n(o),u=s(96915),m=s(56254),p=s(80087),x=s(11922),h=s(1712),f=s(3528);let g=(0,f.Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),w=(0,f.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var y=s(22299);let components_MCQCounter=({correct_answers:e,wrong_answers:t})=>(0,r.jsxs)(n.Zb,{className:"flex flex-row items-center justify-center p-2",children:[r.jsx(g,{color:"green",size:30}),r.jsx("span",{className:"mx-3 text-2xl text-[green]",children:e}),r.jsx(y.Z,{orientation:"vertical"}),r.jsx("span",{className:"mx-3 text-2xl text-[red]",children:t}),r.jsx(w,{color:"red",size:30})]});var j=s(79529),v=s(93258),q=s(10762);let components_MCQ=({game:e})=>{let[t,s]=i().useState(0),[a,o]=i().useState(!1),[f,g]=i().useState({correct_answers:0,wrong_answers:0}),[w,y]=i().useState(0),[_,N]=i().useState(new Date),b=i().useMemo(()=>e.questions[t],[t,e]),P=i().useMemo(()=>b&&b.options?JSON.parse(b.options):[],[b]),{toast:C}=(0,q.pm)(),{mutate:z,isLoading:k}=(0,j.D)({mutationFn:async()=>{let e={questionId:b.id,userInput:P[w]},t=await v.default.post("/api/checkAnswer",e);return t.data}}),{mutate:D}=(0,j.D)({mutationFn:async()=>{let t={gameId:e.id},s=await v.default.post("/api/endGame",t);return s.data}});i().useEffect(()=>{let e=setInterval(()=>{a||N(new Date)},1e3);return()=>clearInterval(e)},[a]);let A=i().useCallback(()=>{z(void 0,{onSuccess:({isCorrect:r})=>{if(r?(g(e=>({...e,correct_answers:e.correct_answers+1})),C({title:"Correct",description:"You got it right!",variant:"success"})):(g(e=>({...e,wrong_answers:e.wrong_answers+1})),C({title:"Incorrect",description:"You got it wrong!",variant:"destructive"})),t===e.questions.length-1){D(),o(!0);return}s(e=>e+1)}})},[z,t,e.questions.length,C,D]);return(i().useEffect(()=>{let handleKeyDown=e=>{let t=e.key;"1"===t?y(0):"2"===t?y(1):"3"===t?y(2):"4"===t?y(3):"Enter"===t&&A()};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[A]),a)?(0,r.jsxs)("div",{className:"absolute flex flex-col justify-center -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",children:[(0,r.jsxs)("div",{className:"px-4 py-2 mt-2 font-semibold text-white bg-green-500 rounded-md whitespace-nowrap",children:["You Completed in"," ",(0,h.j)((0,c.Z)(_,e.timeStarted))]}),(0,r.jsxs)(d(),{href:`/statistics/${e.id}`,className:(0,h.cn)((0,l.d)({size:"lg"}),"mt-2"),children:["View Statistics",r.jsx(u.Z,{className:"w-4 h-4 ml-2"})]})]}):(0,r.jsxs)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2 md:w-[80vw] max-w-4xl w-[90vw] top-1/2 left-1/2",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-slate-400",children:"Topic"})," \xa0",r.jsx("span",{className:"px-2 py-1 text-white rounded-lg bg-slate-800",children:e.topic})]}),(0,r.jsxs)("div",{className:"flex self-start mt-3 text-slate-400",children:[r.jsx(m.Z,{className:"mr-2"}),(0,h.j)((0,c.Z)(_,e.timeStarted))]})]}),r.jsx(components_MCQCounter,{correct_answers:f.correct_answers,wrong_answers:f.wrong_answers})]}),r.jsx(n.Zb,{className:"w-full mt-4",children:(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center",children:[(0,r.jsxs)(n.ll,{className:"mr-5 text-center divide-y divide-zinc-600/50",children:[r.jsx("div",{children:t+1}),r.jsx("div",{className:"text-base text-slate-400",children:e.questions.length})]}),r.jsx(n.SZ,{className:"flex-grow text-lg",children:b?.question})]})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-4",children:[P.map((e,t)=>r.jsx(l.z,{variant:w===t?"default":"outline",className:"justify-start w-full py-8 mb-4",onClick:()=>y(t),children:(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[r.jsx("div",{className:"p-2 px-3 mr-5 border rounded-md",children:t+1}),r.jsx("div",{className:"text-start",children:e})]})},e)),(0,r.jsxs)(l.z,{variant:"default",className:"mt-2",size:"lg",disabled:k||a,onClick:()=>{A()},children:[k&&r.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Next ",r.jsx(x.Z,{className:"w-4 h-4 ml-2"})]})]})]})}},73685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(48144),a=s(10478);s(53830);var i=s(6465),n=s(11805),l=s(17536);let c=(0,l.createProxy)(String.raw`/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/components/MCQ.tsx`),{__esModule:o,$$typeof:d}=c,u=c.default,MCQPage=async({params:{gameId:e}})=>{let t=await (0,a.P)();if(!t?.user)return(0,i.redirect)("/");let s=await n._.game.findUnique({where:{id:e},include:{questions:{select:{id:!0,question:!0,options:!0}}}});return s&&"open_ended"!==s.gameType?r.jsx(u,{game:s}):(0,i.redirect)("/quiz")},m=MCQPage}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7395,4959,9506,5226,4276,7662,4410,2299,478,7060,93,762],()=>__webpack_exec__(28586));module.exports=s})();
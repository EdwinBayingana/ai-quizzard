(()=>{var e={};e.id=719,e.ids=[719],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},59130:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>u,routeModule:()=>x,tree:()=>d});var r=s(73137),n=s(54647),a=s(4183),i=s.n(a),l=s(71775),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=r.AppPageRouteModule,d=["",{children:["play",{children:["open-ended",{children:["[gameId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,57953)),"/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/play/open-ended/[gameId]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,37226)),"/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/app/play/open-ended/[gameId]/page.tsx"],p="/play/open-ended/[gameId]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new c({definition:{kind:n.x.APP_PAGE,page:"/play/open-ended/[gameId]/page",pathname:"/play/open-ended/[gameId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27419:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,42796,23)),Promise.resolve().then(s.bind(s,85467))},85467:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>components_OpenEnded});var r=s(60080),n=s(1712),a=s(2169),i=s(96915),l=s(56254),o=s(80087),c=s(11922),d=s(9885),u=s.n(d),p=s(46601),m=s(69957),x=s(70696),h=s(73057);let components_OpenEndedPercentage=({percentage:e})=>(0,r.jsxs)(p.Zb,{className:"flex flex-row items-center p-2",children:[r.jsx(x.Z,{size:30}),r.jsx("span",{className:"ml-3 text-2xl opacity-75",children:e}),r.jsx(h.Z,{className:"",size:25})]});var f=s(96199),g=s.n(f);let w="_____",components_BlankAnswerInput=({answer:e,setBlankAnswer:t})=>{let s=u().useMemo(()=>{let t=g().extract(e,{language:"english",remove_digits:!0,return_changed_case:!1,remove_duplicates:!1}),s=t.sort(()=>.5-Math.random());return s.slice(0,2)},[e]),n=u().useMemo(()=>{let r=s.reduce((e,t)=>e.replaceAll(t,w),e);return t(r),r},[e,s,t]);return r.jsx("div",{className:"flex justify-start w-full mt-4",children:r.jsx("h1",{className:"text-xl font-semibold",children:n.split(w).map((e,t)=>(0,r.jsxs)(u().Fragment,{children:[e,t===n.split(w).length-1?"":r.jsx("input",{id:"user-blank-input",className:"text-center border-b-2 border-black dark:border-white w-28 focus:border-2 focus:border-b-4 focus:outline-none",type:"text"})]},t))})})};var j=s(79529),v=s(93258),_=s(10762),y=s(11440),q=s.n(y);let components_OpenEnded=({game:e})=>{let[t,s]=u().useState(!1),[d,x]=u().useState(0),[h,f]=u().useState(""),[g,w]=u().useState(0),y=u().useMemo(()=>e.questions[d],[d,e.questions]),{mutate:b}=(0,j.D)({mutationFn:async()=>{let t={gameId:e.id},s=await v.default.post("/api/endGame",t);return s.data}}),{toast:N}=(0,_.pm)(),[P,E]=u().useState(new Date),{mutate:k,isLoading:A}=(0,j.D)({mutationFn:async()=>{let e=h;document.querySelectorAll("#user-blank-input").forEach(t=>{e=e.replace("_____",t.value),t.value=""});let t={questionId:y.id,userInput:e},s=await v.default.post("/api/checkAnswer",t);return s.data}});u().useEffect(()=>{if(!t){let e=setInterval(()=>{E(new Date)},1e3);return()=>clearInterval(e)}},[t]);let z=u().useCallback(()=>{k(void 0,{onSuccess:({percentageSimilar:t})=>{if(N({title:`Your answer is ${t}% similar to the correct answer`}),w(e=>Math.floor((e+t)/(d+1))),d===e.questions.length-1){b(),s(!0);return}x(e=>e+1)},onError:e=>{console.error(e),N({title:"Something went wrong",variant:"destructive"})}})},[k,d,N,b,e.questions.length]);return(u().useEffect(()=>{let handleKeyDown=e=>{let t=e.key;"Enter"===t&&z()};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[z]),t)?(0,r.jsxs)("div",{className:"absolute flex flex-col justify-center -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",children:[(0,r.jsxs)("div",{className:"px-4 py-2 mt-2 font-semibold text-white bg-green-500 rounded-md whitespace-nowrap",children:["You Completed in"," ",(0,n.j)((0,a.Z)(P,e.timeStarted))]}),(0,r.jsxs)(q(),{href:`/statistics/${e.id}`,className:(0,n.cn)((0,m.d)({size:"lg"}),"mt-2"),children:["View Statistics",r.jsx(i.Z,{className:"w-4 h-4 ml-2"})]})]}):(0,r.jsxs)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2 md:w-[80vw] max-w-4xl w-[90vw] top-1/2 left-1/2",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-slate-400",children:"Topic"})," \xa0",r.jsx("span",{className:"px-2 py-1 text-white rounded-lg bg-slate-800",children:e.topic})]}),(0,r.jsxs)("div",{className:"flex self-start mt-3 text-slate-400",children:[r.jsx(l.Z,{className:"mr-2"}),(0,n.j)((0,a.Z)(P,e.timeStarted))]})]}),r.jsx(components_OpenEndedPercentage,{percentage:g})]}),r.jsx(p.Zb,{className:"w-full mt-4",children:(0,r.jsxs)(p.Ol,{className:"flex flex-row items-center",children:[(0,r.jsxs)(p.ll,{className:"mr-5 text-center divide-y divide-zinc-600/50",children:[r.jsx("div",{children:d+1}),r.jsx("div",{className:"text-base text-slate-400",children:e.questions.length})]}),r.jsx(p.SZ,{className:"flex-grow text-lg",children:y?.question})]})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-4",children:[r.jsx(components_BlankAnswerInput,{setBlankAnswer:f,answer:y.answer}),(0,r.jsxs)(m.z,{variant:"outline",className:"mt-4",disabled:A||t,onClick:()=>{z()},children:[A&&r.jsx(o.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Next ",r.jsx(c.Z,{className:"w-4 h-4 ml-2"})]})]})]})}},57953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(48144),n=s(17536);let a=(0,n.createProxy)(String.raw`/Users/zeds/Documents/Coding/ANDELA/Projects/quizmify/src/components/OpenEnded.tsx`),{__esModule:i,$$typeof:l}=a,o=a.default;var c=s(11805),d=s(10478),u=s(6465);s(53830);let OpenEndedPage=async({params:{gameId:e}})=>{let t=await (0,d.P)();if(!t?.user)return(0,u.redirect)("/");let s=await c._.game.findUnique({where:{id:e},include:{questions:{select:{id:!0,question:!0,answer:!0}}}});return s&&"mcq"!==s.gameType?r.jsx(o,{game:s}):(0,u.redirect)("/quiz")},p=OpenEndedPage}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7395,4959,9506,5226,4276,7662,4410,4665,478,7060,93,762],()=>__webpack_exec__(59130));module.exports=s})();
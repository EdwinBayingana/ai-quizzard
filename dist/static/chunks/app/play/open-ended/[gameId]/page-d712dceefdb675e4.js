(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{7417:function(e,t,s){Promise.resolve().then(s.t.bind(s,3388,23)),Promise.resolve().then(s.bind(s,4615))},4615:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return components_OpenEnded}});var n=s(7437),r=s(992),a=s(8199),o=s(2174),i=s(4958),l=s(6264),c=s(7158),d=s(2265),u=s(5431),m=s(8700),f=s(6654),p=s(9676),components_OpenEndedPercentage=e=>{let{percentage:t}=e;return(0,n.jsxs)(u.Zb,{className:"flex flex-row items-center p-2",children:[(0,n.jsx)(f.Z,{size:30}),(0,n.jsx)("span",{className:"ml-3 text-2xl opacity-75",children:t}),(0,n.jsx)(p.Z,{className:"",size:25})]})},x=s(1884),h=s.n(x);let v="_____";var components_BlankAnswerInput=e=>{let{answer:t,setBlankAnswer:s}=e,r=d.useMemo(()=>{let e=h().extract(t,{language:"english",remove_digits:!0,return_changed_case:!1,remove_duplicates:!1}),s=e.sort(()=>.5-Math.random());return s.slice(0,2)},[t]),a=d.useMemo(()=>{let e=r.reduce((e,t)=>e.replaceAll(t,v),t);return s(e),e},[t,r,s]);return(0,n.jsx)("div",{className:"flex justify-start w-full mt-4",children:(0,n.jsx)("h1",{className:"text-xl font-semibold",children:a.split(v).map((e,t)=>(0,n.jsxs)(d.Fragment,{children:[e,t===a.split(v).length-1?"":(0,n.jsx)("input",{id:"user-blank-input",className:"text-center border-b-2 border-black dark:border-white w-28 focus:border-2 focus:border-b-4 focus:outline-none",type:"text"})]},t))})})},w=s(9808),g=s(9222),j=s(187),b=s(1396),y=s.n(b),components_OpenEnded=e=>{let{game:t}=e,[s,f]=d.useState(!1),[p,x]=d.useState(0),[h,v]=d.useState(""),[b,N]=d.useState(0),_=d.useMemo(()=>t.questions[p],[p,t.questions]),{mutate:S}=(0,w.D)({mutationFn:async()=>{let e={gameId:t.id},s=await g.default.post("/api/endGame",e);return s.data}}),{toast:T}=(0,j.pm)(),[E,A]=d.useState(new Date),{mutate:O,isLoading:k}=(0,w.D)({mutationFn:async()=>{let e=h;document.querySelectorAll("#user-blank-input").forEach(t=>{e=e.replace("_____",t.value),t.value=""});let t={questionId:_.id,userInput:e},s=await g.default.post("/api/checkAnswer",t);return s.data}});d.useEffect(()=>{if(!s){let e=setInterval(()=>{A(new Date)},1e3);return()=>clearInterval(e)}},[s]);let D=d.useCallback(()=>{O(void 0,{onSuccess:e=>{let{percentageSimilar:s}=e;if(T({title:"Your answer is ".concat(s,"% similar to the correct answer")}),N(e=>Math.floor((e+s)/(p+1))),p===t.questions.length-1){S(),f(!0);return}x(e=>e+1)},onError:e=>{console.error(e),T({title:"Something went wrong",variant:"destructive"})}})},[O,p,T,S,t.questions.length]);return(d.useEffect(()=>{let handleKeyDown=e=>{let t=e.key;"Enter"===t&&D()};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[D]),s)?(0,n.jsxs)("div",{className:"absolute flex flex-col justify-center -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",children:[(0,n.jsxs)("div",{className:"px-4 py-2 mt-2 font-semibold text-white bg-green-500 rounded-md whitespace-nowrap",children:["You Completed in"," ",(0,r.j)((0,a.Z)(E,t.timeStarted))]}),(0,n.jsxs)(y(),{href:"/statistics/".concat(t.id),className:(0,r.cn)((0,m.d)({size:"lg"}),"mt-2"),children:["View Statistics",(0,n.jsx)(o.Z,{className:"w-4 h-4 ml-2"})]})]}):(0,n.jsxs)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2 md:w-[80vw] max-w-4xl w-[90vw] top-1/2 left-1/2",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-slate-400",children:"Topic"})," \xa0",(0,n.jsx)("span",{className:"px-2 py-1 text-white rounded-lg bg-slate-800",children:t.topic})]}),(0,n.jsxs)("div",{className:"flex self-start mt-3 text-slate-400",children:[(0,n.jsx)(i.Z,{className:"mr-2"}),(0,r.j)((0,a.Z)(E,t.timeStarted))]})]}),(0,n.jsx)(components_OpenEndedPercentage,{percentage:b})]}),(0,n.jsx)(u.Zb,{className:"w-full mt-4",children:(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center",children:[(0,n.jsxs)(u.ll,{className:"mr-5 text-center divide-y divide-zinc-600/50",children:[(0,n.jsx)("div",{children:p+1}),(0,n.jsx)("div",{className:"text-base text-slate-400",children:t.questions.length})]}),(0,n.jsx)(u.SZ,{className:"flex-grow text-lg",children:null==_?void 0:_.question})]})}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-4",children:[(0,n.jsx)(components_BlankAnswerInput,{setBlankAnswer:v,answer:_.answer}),(0,n.jsxs)(m.z,{variant:"outline",className:"mt-4",disabled:k||s,onClick:()=>{D()},children:[k&&(0,n.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Next ",(0,n.jsx)(c.Z,{className:"w-4 h-4 ml-2"})]})]})]})}},8700:function(e,t,s){"use strict";s.d(t,{d:function(){return l},z:function(){return c}});var n=s(7437),r=s(2265),a=s(7256),o=s(6061),i=s(992);let l=(0,o.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:r,size:o,className:s})),ref:t,...d})});c.displayName="Button"},5431:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var n=s(7437),r=s(2265),a=s(992);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},187:function(e,t,s){"use strict";s.d(t,{pm:function(){return useToast}});var n=s(2265);let r=0,a=new Map,addToRemoveQueue=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?addToRemoveQueue(s):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],i={toasts:[]};function dispatch(e){i=reducer(i,e),o.forEach(e=>{e(i)})}function toast(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:s});return dispatch({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:s,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function useToast(){let[e,t]=n.useState(i);return n.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}},992:function(e,t,s){"use strict";s.d(t,{cn:function(){return cn},j:function(){return formatTimeDelta}});var n=s(7042),r=s(3986);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m)((0,n.W)(t))}function formatTimeDelta(e){let t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),n=Math.floor(e-3600*t-60*s),r=[];return t>0&&r.push("".concat(t,"h")),s>0&&r.push("".concat(s,"m")),n>0&&r.push("".concat(n,"s")),r.join(" ")}}},function(e){e.O(0,[677,724,343,25,961,971,864,744],function(){return e(e.s=7417)}),_N_E=e.O()}]);